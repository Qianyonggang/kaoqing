# 考勤管理平台（本地版）

这是一个基于 **Python + Flask + SQLite** 的轻量级考勤管理网站，支持手机端与网页端访问，适合小型团队在本地电脑上部署使用。

## 功能概览

- 公司注册与登录
- 公司创建者可创建多个管理员账号并授予权限
- 创建多个团队，团队可共享员工
- 员工管理（姓名、联系方式、单日工资，支持搜索与删除）
- 每日考勤登记（支持正负调整）
- 员工借支记录
- 工资自动统计（工作天数 × 单日工资 - 借支）
- 操作日志（公司创建者可查看）
- 可按团队筛选报表并导出年度 Excel（含 1-12 月工作天数）

## 本地搭建步骤（适合网站小白）

### 1. 准备环境

请确保电脑上安装了 **Python 3.10 及以上版本**。

检查方式：

```bash
python --version
```

如果没有，请先去官网下载并安装：<https://www.python.org/downloads/>

### 2. 下载代码

将当前项目文件夹放到你的电脑中，例如：

```
C:\attendance
```

### 3. 创建虚拟环境（推荐）

在项目目录中打开终端，执行：

```bash
python -m venv venv
```

激活虚拟环境：

- Windows：
  ```bash
  venv\Scripts\activate
  ```
- macOS / Linux：
  ```bash
  source venv/bin/activate
  ```

### 4. 安装依赖

```bash
pip install -r requirements.txt
```

### 5. 启动网站

```bash
python app.py
```

看到类似提示：

```
Running on http://0.0.0.0:5000/
```

说明启动成功。

### 6. 浏览器访问

- 本机访问：打开浏览器输入 `http://127.0.0.1:5000`
- 手机访问：确保手机与电脑在同一 Wi-Fi 下，输入：
  ```
  http://你的电脑IP:5000
  ```

电脑 IP 查看方式：

- Windows：
  ```bash
  ipconfig
  ```
- macOS / Linux：
  ```bash
  ifconfig
  ```

找到局域网 IP，如 `192.168.1.8`。

### 7. 使用流程建议

1. 注册公司账号（创建者）
2. 创建团队
3. 新增员工
4. 把员工加入团队
5. 每日登记考勤（可输入 1、0 或负数）
6. 记录借支
7. 在报表页勾选团队筛选并导出年度 Excel

## 数据说明

- 数据库文件默认保存为 `app.db`
- 如需更换数据库路径，可设置环境变量：

```bash
export APP_DB=/path/to/your.db
```

## 温馨提示

- 如果忘记密码，可以直接清空 `app.db`，重新注册公司账号。
- 如需多台电脑协作，可使用局域网共享或部署到服务器。

---

如需扩展更多功能（例如权限细分、审批流程、二维码打卡等），可在此基础上继续升级。
